<div *ngIf="place$ | async as place">
  <ng-container *ngIf="place === null"
    ><p>
      Could not load your place, please refresh and try again later
    </p></ng-container
  >
  <div class="flex flex-row gap-2">
    <div *ngIf="mapData$ | async as mapData" class="w-5/6">
      <div style="height: 500px">
        <app-map
          [markers]="mapData.markers"
          [directions]="mapData.direction"
        ></app-map>
      </div>
    </div>
    <div class="flex-1">
      <ol class="border-l-2 border-neutral-300 dark:border-neutral-500">
        <!-- Previous place -->
        <li *ngIf="place.previousPlace" [routerLink]="['../',place.previousPlace.id]" class="hover:bg-neutral-100/80 hover:cursor-pointer">
          <div class="flex-start flex items-center pt-3">
            <div class="-ml-[5px] mr-3 h-[9px] w-[9px] rounded-full bg-neutral-300 dark:bg-neutral-500"></div>
            <hr class="w-[1rem] h-1 my-8 ml-[-1rem] bg-neutral-300 border-0 rounded dark:bg-gray-700">
            <p class="text-sm text-neutral-500 dark:text-neutral-300">
              <span
                class="inline-block whitespace-nowrap rounded-full bg-neutral-300 px-[0.65em] pb-[0.25em] pt-[0.35em] text-center align-baseline text-[0.75em] font-bold leading-none text-gray-100"              >
                {{ place.previousPlace.order }}
              </span>

            </p>
            <h4 class="my-8 mx-2 text-xl font-semibold">
              Stop at {{ place.previousPlace.name }}
            </h4>
          </div>
          <div class="mb-6 ml-4 mt-2">
            <span
              *ngIf="place.previousPlace.budget"
              class="inline-block whitespace-nowrap rounded-ful bg-primary-100 px-[0.65em] pb-[0.25em] pt-[0.35em] text-center align-baseline text-[0.75em] font-bold leading-none text-primary-700">
              {{ place.previousPlace.budget }}$
            </span>
            <p class="mb-3 text-neutral-500 dark:text-neutral-300">
              {{ place.previousPlace.startDate }} - {{ place.previousPlace.endDate }}
            </p>
          </div>
        </li>
        <!-- This place -->

        <li [routerLink]="['../',place.current.id]" class="hover:bg-neutral-100/80 hover:cursor-pointer">
          <div class="flex-start flex items-center pt-3">
            <div class="-ml-[5px] mr-3 h-[9px] w-[9px] rounded-full bg-sky-600 dark:bg-neutral-500"></div>
            <hr class="w-[1rem] h-1 my-8 ml-[-1rem] bg-sky-600 border-0 rounded dark:bg-gray-700">
            <p class="text-sm text-neutral-500 dark:text-neutral-300">
              <span
                class="inline-block whitespace-nowrap rounded-full bg-primary-100 px-[0.65em] pb-[0.25em] pt-[0.35em] text-center align-baseline text-[0.75em] font-bold leading-none text-primary-700"              >
                {{ place.current.order }}
              </span>

            </p>
            <h4 class="my-8 mx-2 text-xl font-semibold">
              Stop at {{ place.current.name }}
            </h4>
          </div>
          <div class="mb-6 ml-4 mt-2">
            <span
              *ngIf="place.current.budget"
              class="inline-block whitespace-nowrap rounded-ful bg-primary-100 px-[0.65em] pb-[0.25em] pt-[0.35em] text-center align-baseline text-[0.75em] font-bold leading-none text-primary-700">
              {{ place.current.budget }}$
            </span>
            <p class="mb-3 text-neutral-500 dark:text-neutral-300">
              {{ place.current.startDate }} - {{ place.current.endDate }}
            </p>
          </div>
        </li>

        <!-- Next place -->
        <li *ngIf="place.nextPlace" [routerLink]="['../',place.nextPlace.id]" class="hover:bg-neutral-100/80 hover:cursor-pointer">
          <div class="flex-start flex items-center pt-3">
            <div class="-ml-[5px] mr-3 h-[9px] w-[9px] rounded-full bg-neutral-300 dark:bg-neutral-500"></div>
            <hr class="w-[1rem] h-1 my-8 ml-[-1rem] bg-neutral-300 border-0 rounded dark:bg-gray-700">
            <p class="text-sm text-neutral-500 dark:text-neutral-300">
              <span
                class="inline-block whitespace-nowrap rounded-full bg-neutral-300 px-[0.65em] pb-[0.25em] pt-[0.35em] text-center align-baseline text-[0.75em] font-bold leading-none text-gray-100"              >
                {{ place.nextPlace.order }}
              </span>

            </p>
            <h4 class="my-8 mx-2 text-xl font-semibold">
              Stop at {{ place.nextPlace.name }}
            </h4>
          </div>
          <div class="mb-6 ml-4 mt-2">
            <span
              *ngIf="place.nextPlace.budget"
              class="inline-block whitespace-nowrap rounded-ful bg-primary-100 px-[0.65em] pb-[0.25em] pt-[0.35em] text-center align-baseline text-[0.75em] font-bold leading-none text-primary-700">
              {{ place.nextPlace.budget }}$
            </span>
            <p class="mb-3 text-neutral-500 dark:text-neutral-300">
              {{ place.nextPlace.startDate }} - {{ place.nextPlace.endDate }}
            </p>
          </div>
        </li>
      </ol>
    </div>
  </div>

  <div class="flex flex-row">
    <div *ngFor="let poi of place.pois">
      <app-stop-card [place]="poi"></app-stop-card>
    </div>
  </div>
</div>
